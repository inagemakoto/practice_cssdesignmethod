(function(e){e.fn.ahPlaceholder=function(t){var o={placeholderColor:"silver",placeholderAttr:"title",likeApple:!1},l=e.extend({},o,t),r=[" ","0","9","16","17","32","27","37","38","39","40","91","92","93","112","113","114","115","116","117","118","119","120","121","122","123"," "].join("@"),i=function(){return document.all?function(e){return e.keyCode}:document.getElementById?function(e){return e.keyCode?e.keyCode:e.charCode}:document.layers?function(e){return e.which}:void 0}(),n=function(){if(!("placeholder"===l.placeholderAttr&&"placeholder"in document.createElement("input"))){e.data(this,"placeholder-string",e(this).attr(l.placeholderAttr)),e.data(this,"placeholder-color",e(this).css("color"));var t=e.data(this,"placeholder-string"),o=this,r=e(this);""===o.value&&(o.value=t,r.css("color",l.placeholderColor)),l.likeApple===!0?(r.bind("mousedown",h),r.bind("keydown",a),r.bind("keyup",s)):(r.bind("focus",c),r.bind("blur",s)),r.closest("form").submit(function(){return o.value===e.data(o,"placeholder-string")&&r.css("color")===e("<div/>").css("color",l.placeholderColor).css("color")&&(o.value=""),!0})}},a=function(t){if(this.value===e.data(this,"placeholder-string")){var o=i(t);if(-1!==r.indexOf("@"+o+"@"))return 9===o;u(this)}},c=function(){this.value===e.data(this,"placeholder-string")&&u(this)},s=function(e){""===this.value&&(d(this),"keyup"===e.type&&h.apply(this))},h=function(){if(this.value===e.data(this,"placeholder-string")){if(e(this).focus(),this.createTextRange){var t=this.createTextRange();t.collapse(),t.moveEnd("character",0),t.moveStart("character",0),setTimeout(function(){t.select()},17)}else this.setSelectionRange&&this.setSelectionRange(0,0);return!1}},d=function(t){t.value=e.data(t,"placeholder-string"),e(t).css("color",l.placeholderColor)},u=function(t){t.value="",e(t).css("color",e.data(t,"placeholder-color"))};return this.each(function(){n.apply(this)}),this}})(jQuery);
